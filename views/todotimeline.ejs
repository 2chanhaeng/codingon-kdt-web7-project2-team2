<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../public/timeline.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" ></script>

    <title>Document</title>
</head>

<body>
    <main class="main-css">
        <div class="top">
            <nav>
                <img class="top-logo" src="./image/dailylogo3.png"></img>
                <fieldset>
                    <label>
                        <input type="radio" name="page" value="diarytimeline" id="dairy-radio" />
                        <span>Diary</span>
                    </label>
                    <label>
                        <input type="radio" name="page" value="todotimeline" id="todo-radio" />
                        <span>ToDo</span>
                    </label>
                </fieldset>
            </nav>
        </div>
        <div class="hi-margin"></div>
        <div class="dropdown dropcss">
            <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                년도
              </a>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <% for (var i = 2020; i <= 2025; i++) { %>
                  <li><a class="dropdown-item" href="#" onclick="updateDropdownYearLink('<%= i %>')"><%= i %> 년</a></li>
                <% } %>
              </ul>
            <a class="btn btn-secondary dropdown-toggle dropdown-menu-css" href="#" role="button" id="dropdownMenuLink2" data-bs-toggle="dropdown" aria-expanded="false">
                월
              </a>
              <ul class="dropdown-menu " aria-labelledby="dropdownMenuLink" >
                <% for (var i = 1; i <= 12; i++) { %>
                    <li><a class="dropdown-item" href="#" onclick="updateDropdownMonthLink('<%= i %>')"><%= i %>월</a></li>
                  <% } %>
              </ul>
              <span class="timelineshow" onclick="timelineshow()">보기</span>
          </div>        
          <div class="hi-main">   
        <div class="hi box">
                <div><img src="../image/dailylogo3.png" class="diaryimg"></img></div>
                <div class="show-month-day">
                    <span id="Monthshow">00월</span>
                    <span id="Dayshow">00일</span>
                </div>
                <div class="hiline">
                    <div class="modify-box">
                        <img class="modify1" src="../image/updateimg.png">
                        <img class="modify2" src="../image/deleteimg.png">
                    </div>
                    <div>
                        <div>comment</div>
                        <div>img</div>
                    </div>
                </div>
            </div>
        </div> 
            <div class="bottom">
                <div class="bottom-item1">달력보기</div>
                <img class="write-button" src="../image/emotion2.png" />
                <div class="bottom-item2">타임라인</div>
              </div>
        </div>

        <script>
            function timelineshow(){
                
            }
            function updateDropdownYearLink(year) {
    var dropdownMenuLink = document.getElementById('dropdownMenuLink');
    dropdownMenuLink.textContent = year + ' 년도';
  }
  function updateDropdownMonthLink(month) {
    var dropdownMenuLink = document.getElementById('dropdownMenuLink2');
    dropdownMenuLink.textContent = month + ' 월';
  }
             const currentPath = window.location.pathname;
      var dairyradio = document.getElementById("dairy-radio");
      var todoradio = document.getElementById("todo-radio");

      if (currentPath === "/todotimeline") {
        const todoradio = document.getElementById("todo-radio");
        todoradio.checked = true;
      }

      const radioButtons = document.querySelectorAll(
        'input[type="radio"][name="page"]'
      );

// 라디오 버튼 변경 시 페이지 이동 함수
function handleRadioChange() {
  if (this.checked) {
    const pageValue = this.value;
    window.location.href = pageValue; // 페이지 변경을 위한 URL 이동
    
  }
}

// 라디오 버튼에 이벤트 리스너 추가
radioButtons.forEach(button => {
  button.addEventListener('change', handleRadioChange);
  diarytimeline.addEventListener('click', function(){
    diarytimeline.checked=true;
  });
  todotimeline.addEventListener('click', function(){
    todotimeline.checked=true;
  })
});
             window.onload = function () { buildCalendar(); }    // 웹 페이지가 로드되면 buildCalendar 실행
    let newDIV = document.createElement("p");

    let nowMonth = new Date();  // 현재 달을 페이지를 로드한 날의 달로 초기화
    let today = new Date();     // 페이지를 로드한 날짜를 저장
    today.setHours(0, 0, 0, 0);    // 비교 편의를 위해 today의 시간을 초기화
    const calMonth = document.getElementById("calMonth");

    // 달력 생성 : 해당 달에 맞춰 테이블을 만들고, 날짜를 채워 넣는다.
    function buildCalendar() {

        let firstDate = new Date(nowMonth.getFullYear(), nowMonth.getMonth(), 1);     // 이번달 1일
        let lastDate = new Date(nowMonth.getFullYear(), nowMonth.getMonth() + 1, 0);  // 이번달 마지막날

        let tbody_Calendar = document.querySelector(".Calendar > tbody");
        document.getElementById("calYear").innerText = nowMonth.getFullYear();             // 연도 숫자 갱신
        document.getElementById("calMonth").innerText = leftPad(nowMonth.getMonth() + 1);  // 월 숫자 갱신

        while (tbody_Calendar.rows.length > 0) {                        // 이전 출력결과가 남아있는 경우 초기화
            tbody_Calendar.deleteRow(tbody_Calendar.rows.length - 1);
        }

        let nowRow = tbody_Calendar.insertRow();        // 첫번째 행 추가           

        for (let j = 0; j < firstDate.getDay(); j++) {  // 이번달 1일의 요일만큼
            let nowColumn = nowRow.insertCell();        // 열 추가
        }

        for (let nowDay = firstDate; nowDay <= lastDate; nowDay.setDate(nowDay.getDate() + 1)) {   // day는 날짜를 저장하는 변수, 이번달 마지막날까지 증가시키며 반복  

            let nowColumn = nowRow.insertCell();        // 새 열을 추가하고

            let newDIV = document.createElement("p");
            newDIV.innerHTML = leftPad(nowDay.getDate());        // 추가한 열에 날짜 입력
            nowColumn.appendChild(newDIV);

            let newIMG = document.createElement("img");
            newIMG.append('')

            if (nowDay.getDay() == 6) {                 // 토요일인 경우
                nowRow = tbody_Calendar.insertRow();    // 새로운 행 추가
            }
        }
    }
      // 이전달 버튼 클릭
      function prevCalendar() {
        nowMonth = new Date(nowMonth.getFullYear(), nowMonth.getMonth() - 1, nowMonth.getDate());   // 현재 달을 1 감소
        buildCalendar();    // 달력 다시 생성
    }
    // 다음달 버튼 클릭
    function nextCalendar() {
        nowMonth = new Date(nowMonth.getFullYear(), nowMonth.getMonth() + 1, nowMonth.getDate());   // 현재 달을 1 증가
        buildCalendar();    // 달력 다시 생성
    }
        </script>

</body>

</html>
